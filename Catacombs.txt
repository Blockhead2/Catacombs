[EDIT/RPG] Catacombs v0.2 - Random Dungeon Generator (Permissions)[1060]

Catacombs - Random Dungeon Generator:
[B]Version:[/B] v0.2

Builds configurable dungeons under your feet for players to explore and loot.
I wrote my own level builder but I guess it's a homage to those text based
classics like Nethack and of course Angband.

[IMG]http://dl.dropbox.com/u/39934793/logo.png[/IMG]

[B]Features:[/B]
[LIST]
[*]Generates random multi-level dungeons.
[*]Only builds in solid regions it considers natural.
[*]Admins can build dungeons, Players can explore them.
[*]All commands are integrated with Permissions
[*]Secret doors
[*]Information persists using MySQL database (lots of features are lost without this).
[*]Only the toughest adventurers will survive without armour, weapons, food and torches.
[*]Special chests at strategic points to add to the general loot.
[*]Configurable Dungeon layout and content
[*]Dungeons can be size/configured so they work better with parties of players  
[*]Which listener routines are active can be configured (might be needed on huge servers)
[*]Admins can easily unprotect or fill dungeons in.
[*]Designed to handle multiple worlds (not heavily tested)
[/LIST]


[B]Real Spoilers!!![/B][SPOILER]
[LIST]
[*] Warm, safe "hut" on top to keep out the night while finding courage
[*] Hut contains storage chests, workbench, anvil and furnace
[*] Zombie, Skelly and Spider mass to attack
[*] PigZombie and Wolves also hunger for your blood
[*] Destroy or torch off the spawners
[*] Occasional wandering Creepers
[*] The hardness of the cobble and fittings prevent any modifications
[*] Torches are the only things you'll want to leave inside
[*] Web covered archways and doors join the chambers
[*] Random small chests with varied loot
[*] Horrid webs hang from the ceilings
[*] Occasional fetid pools of stagnent water
[*] Dangerous pools full to the rim with churning lava
[*] Tap certain blocks to hunt for secret
[*] Leave for the surface with packs bursting with loot
[*] Mushroom infestations in the deepest dankest rooms
[*] Centuries old cake on tables for the very hungry
[*] Displaced ore is swept in the special chests
[*] You might stumble upon abandoned workbenches and furnaces
[*] Listen to the moans and rustling noises of impending death
[*] Quickly grab any gold you see on or around the mounds of dead bodies
[*] Special end of level chests usually contain iron or gold goods.
[*] Grab and diamonds or precious items you might find in the last room
[/LIST]
[/SPOILER]

Download [URL='http://dl.dropbox.com/u/39934793/Catacombs.jar']Catacombs.jar[/URL]

[B]Images:[/B]
[SPOILER]
The top of the dungeon.
[IMG]http://dl.dropbox.com/u/39934793/hut.png[/IMG]

Inside the dungeon.
[IMG]http://dl.dropbox.com/u/39934793/inside2.png[/IMG]

A small level with the roof off
[IMG]http://dl.dropbox.com/u/39934793/roof_off.png[/IMG]

[/SPOILER]

[B]Summary of Commands:[/B]
[CODE]
/catacombs                    - Lists commands in game.
/cat                          - alias for /catacombs

/cat plan <name> <depth>      - Prospect the area under the players feet to see
                              -   if it's suitable for a dungeon called <name>
                              -   that is <depth> levels deep (and has a small entry
                              -   "hut" on top). The door to the "hut" will always
                              -   be placed behind you.

/cat build <name>             - Stand back 4 or 5 blocks, and build the dungeon

/cat delete <name>            - Fill the dungeon in with plain stone and remove protection

/cat unprot <name>            - Leave the dungeon as it is and remove protection

/cat list                     - List the active dungeons

/cat gold                     - How much do you have from killing mobs
[/CODE]

[B]Permissions:[/B]
[SPOILER]
These are intended for admins
  catacombs.admin  - Gives access to all the commands
  catacombs.plan   - Gives access to just the plan command
  catacombs.build  - Gives access to just the build command
  catacombs.delete - Gives access to just the delete command
  catacombs.unprot - Gives access to just the unprot command
  catacombs.list   - Gives access to just the list command

This is intended for players
  catacombs.gold   - Gives access to just the gold command
[/SPOILER]

[B]Configuration:[/B]
[SPOILER]
[CODE]
MySQL:
    Enables: true                  - Some functions lost when MySQL not present and enabled
    Database:
        User:
            Name: minecraft_user   - MySQL user login name
            Password: password     - MySQL user login password
        Name: Minecraft            - MySQL database name
        Prefix: cat_               - MySQL catacombs table prefix
    Server:
        Port: 3306
        Address: localhost
Admin:
    SecretDoorOnlyInDungeon: false - By default the secret door mechanism works everywhere
                                   -   it's slightly faster not to check

    # These are for advanced admins to experiment with in massive servers
    GoldOff: false                 - 'true' disables entity death listener
    CalmSpawns: false              - 'true' disables entity spawn listener (Wolf/PigZombie)
    emptyChestonDelete: true       - 'false' means chests spew they contents during 'delete'
    MessyCreepers: false           - 'true' disables entity explode listener 
    SecretDoorOff: false           - 'true' disables block damge listener
    DungeonProtectOff: false       - 'true' disables block break listener

catacomb:
    Mob:
        Type:                      - Zombie is the default spawner (40%)
            WolfPct: 10            - 10% chance of spawner being a wolf one 
            SkeletonPct: 25        - 25% chance of spawner being a skelly one 
            PigmanPct: 10          - 10% chance of spawner being a PigZombie one (ouch) 
            SpiderPct: 15          - 15% chance of spawner being a Spider one
        Gold:
            Max: 10                - Maximum gold drop off each mob (use GoldOff to disable gold drops)
            Min: 0                 - Minimum gold drop off each mob (last hit gets any gold)
    Archway:  
        DoubleWidthPct: 60         - 60% of archways are double width (if there is room)
        Type:
            DoorWebPct: 10         - 10% of archways are blocked by webs
            DoorPct: 20            - 20% of archways are protected by door (or double doors)
            HiddenPct: 10          - 10% of archways are secret doors (double doors shrink to 1 wide)
                                   - More doors = safer dungeons
    Room:
        Clutter:
            BenchPct: 3            - % chance room contains a workbench
            SpawnerPct: 50         - % chance room contains a Monster spawner
            ChestPct: 35           - % chance room contains a chest
            Pool:
                PoolPct: 15        - % chance room contains a pool
                FullPoolPct: 40    - % chance the pool fills most of the room (2 block walk way)
                LavaPct: 30        - % chance pool is lava rather than water
            ShroomPct: 10          - % chance room starts with one mushroom
            OvenPct: 2             - % chance room contains a furnace
        Max: 10                    - Maximum room size
        Min: 3                     - Minimum room size 
    CorridorPct: 30                - % chance of a corridor rather than a room
    RadiusMax: 12                  - Maximum level size ("square" radius from the stairs down)
    Depth:
        roof: 1                    - Number of blocks depth in the roof
        floor: 3                   - Number of blocks depth in the floor (allows for secret doors)
        firstLevel: 2              - The hut floor extra depth (go down more before fanning out)
        room: 3                    - Number of blocks depth in the room
    Corridor: 
        Width3Pct: 10              - % chance corridor is 3 wide (default is one wide)
        Width2Pct: 40              - % chance corridor is 2 wide (helps build party dungeons)
        Max: 9                     - Maximum corridor length/width
        Min: 3                     - Maximum corridor length/width
    Block:
        AirWebPct: 1               - % chance an Air block contains a web
        MossyPct: 2                - % chance a cobble block is mossy (higher makes secret door hard)
[/CODE]
[/SPOILER]

[B]Changelog:[/B]
Version 0.2
[LIST]
[*]First public release of Catacombs
[/LIST]

[B]ToDo[/B]
[LIST]
[*]Allow builders to select from multiple dungeon styles that are defined in the config file.
[*]Integrate with iConomy (rather than add ways to spend the gold).
[*]Extra checks when created and destroyed (player inside?, region still natural?).
[*]Protect the dungeon from explosions outside it.
[*]Maybe nice to have a bed in the hut
[*]Might consider integrating with some other world protection plugin.
[*]Might make the loot a little more configurable
[*]Test multiworld
[*]Might fix redstone torch exploit
[/LIST]